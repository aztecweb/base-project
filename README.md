# Simple WordPress Environment

A quick way to start a project with WordPress using Docker.

## Installation

### Database

To install the application the database directory must be empty. Ensure that the database directory doesn't exist.

    $ sudo rm -rf database

To create the database, it only need up the database container.

    $ docker-compose up db

Keep this process running. To test if the database was created, open a new terminal tab and execute the below command. The database service can take a while to start. So this command will fail until the service be up.

    $ docker-compose exec db mysql -u project -pproject project

If after some seconds, the database could not be connected. Restart the installation process.

### Dependencies

Download PHP packages, including the WordPress.

    $ docker-compose run --rm composer install

Download Node packages

    $ docker-compose run --rm node npm install

### Theme

Download Bower packages

    $ docker-compose run --rm node bower install

Build the theme

    $ docker-compose run --rm node grunt

### WordPress

Create symbolic links with configuration files

    $ docker-compose run --rm node grunt symlink:cli symlink:wp

Install the WordPress

    $ docker-compose run --rm php bin/install

## Import data

It's possible import data to the database. The importer read [WXR](https://codex.wordpress.org/Tools_Export_Screen) files. These files are generated by the WordPress exporter tool. The data files must be inner the `extra/data` directory.

By default has two files with the [Theme Unit Test](https://codex.wordpress.org/Theme_Unit_Test) and [WooCommerce Dummy Data](https://docs.woocommerce.com/document/importing-woocommerce-dummy-data/).

To import the data from a file, execute:

    docker-compose run --rm php bin/data [file]

## PHP Code Standards

The project is configured to validate the quality of the PHP code. It is used the [WordPress Coding Standards](https://make.wordpress.org/core/handbook/best-practices/coding-standards/php/) as base to code validation.

The validation isn't done by the _watch_ service. Because is a PHP execution and for now isn't wrappered by the _node_ image. Execute this command to run the code sniffer:

    $ docker-compose run --rm php phpcs

And to fix some warnings using the _PHP Code Beautifier and Fixer_, execute:

    $ docker-compose run --rm php phpcbf
